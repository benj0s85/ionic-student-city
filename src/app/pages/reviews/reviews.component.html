<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Mes Avis & Notes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-refresher slot="fixed" (ionRefresh)="loadUserReviews()">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-list>
    <ion-list-header>
      <ion-label>Mes avis récents</ion-label>
    </ion-list-header>

    <ion-item *ngIf="loading">
      <ion-spinner name="crescent"></ion-spinner>
      <ion-label class="ion-padding-start">
        Chargement des avis...
      </ion-label>
    </ion-item>

    <ng-container *ngIf="!loading">
      <ion-item *ngIf="reviews.length === 0">
        <ion-label>
          <h2>Aucun avis pour le moment</h2>
          <p>Commencez à noter les établissements pour voir vos avis ici</p>
        </ion-label>
      </ion-item>

      <ion-item *ngFor="let review of reviews" [routerLink]="['/places', review.placeId]">
        <ion-label>
          <h2>{{ review.place?.name }}</h2>
          <p class="review-type">
            <ion-icon name="business"></ion-icon>
            {{ review.place?.type }}
          </p>
          <div class="rating">
            <ion-icon name="star" *ngFor="let star of getStarsArray(review.rating)"></ion-icon>
            <ion-icon name="star-outline" *ngFor="let star of getEmptyStarsArray(review.rating)"></ion-icon>
          </div>
          <p class="review-comment">{{ review.comment }}</p>
          <p class="review-date">
            <ion-icon name="time-outline"></ion-icon>
            {{ formatDate(review.createdAt || '') }}
          </p>
        </ion-label>
      </ion-item>
    </ng-container>
  </ion-list>
</ion-content> 